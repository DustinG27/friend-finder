<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Beat Meet</title>
    <!--Bootstrap-->
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"
    />
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <!-- jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!--CSS style sheet-->
    <link rel="stylesheet" type="text/css" href="style.css" />
    <!--font awesome glyphicons-->
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css"
    />
  </head>
  <body>
    <div class="text-center">
      <img src="drawing-drums-drumset-5.png" id="logo" />
    </div>
    <div class="container">
      <h2>Survey Questions</h2>
      <hr />
      <h3>
        <strong>
          About your band
        </strong>
      </h3>
      <h4>Name (Required)</h4>
      <input type="text" id="user-name" class="form-control" required="" />
      <h4>Link to Photo Image (Required)</h4>
      <input type="text" id="user-photo" class="form-control" required="" />
      <hr />
    </div>
    <div class="container">
      <!--Question 1-->
      <div class="form-group">
        <h3>Question 1:</h3>
        <label for="question1"
          ><h4>It's important we have a drummer who can play fast.</h4></label
        >
        <select class="form-control" id="question1">
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option>
        </select>
      </div>

      <hr />

      <!--Question 2-->
      <div class="form-group">
        <h3>Question 2:</h3>
        <label for="question2"
          ><h4>
            We'd prefer if our drummer played simple beats and time measures.
          </h4></label
        >
        <select class="form-control" id="question2">
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option>
        </select>
      </div>

      <hr />

      <!--Question 3-->
      <div class="form-group">
        <h3>Question 3:</h3>
        <label for="question3"
          ><h4>We want our sound to be more modern.</h4></label
        >
        <select class="form-control" id="question3">
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option>
        </select>
      </div>

      <hr />

      <!--Question 4-->
      <div class="form-group">
        <h3>Question 4:</h3>
        <label for="question4"
          ><h4>It's important we have a drummer who can play fast</h4></label
        >
        <select class="form-control" id="question4">
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option>
        </select>
      </div>

      <hr />

      <!--Question 5-->
      <div class="form-group">
        <h3>Question 5:</h3>
        <label for="question5"
          ><h4>We don't care how many fills you want to play!</h4></label
        >
        <select class="form-control" id="question5">
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option>
        </select>
      </div>

      <hr />

      <!--Question 6-->
      <div class="form-group">
        <h3>Question 6:</h3>
        <label for="question6"
          ><h4>
            All a good drummer needs is a kick drum, crash, hi-hat, and snare.
          </h4></label
        >
        <select class="form-control" id="question6">
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option>
        </select>
      </div>

      <hr />

      <!--Question 7-->
      <div class="form-group">
        <h3>Question 7:</h3>
        <label for="question7"><h4>We want a drummer who can party.</h4></label>
        <select class="form-control" id="question7">
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option>
        </select>
      </div>

      <hr />

      <!--Question 8-->
      <div class="form-group">
        <h3>Question 8:</h3>
        <label for="question8"
          ><h4>
            We want a drummer who can create their own stylish beats.
          </h4></label
        >
        <select class="form-control" id="question8">
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option>
        </select>
      </div>

      <hr />

      <!--Question 9-->
      <div class="form-group">
        <h3>Question 9:</h3>
        <label for="question9"><h4>Our drummer shouldn't smile.</h4></label>
        <select class="form-control" id="question9">
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option>
        </select>
      </div>

      <hr />

      <!--Question 10-->
      <div class="form-group">
        <h3>Question 10:</h3>
        <label for="question10"
          ><h4>
            At the end of the day it's about fun and playing music with the
            boys.
          </h4></label
        >
        <select class="form-control" id="question10">
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option>
        </select>
      </div>

      <button
        type="submit"
        class="btn btn-primary btn-lg btn-block"
        id="submit-btn"
      >
        <i class="fa fa-check-circle" aria-hidden="true"></i> Submit
      </button>
      <hr />
    </div>

    <footer>
      <div class="container">
        <p>
          <a href="/api/friends">API Drummers List</a>
          |
          <a href="https://github.com/DustinG27/friend-finder">Github Repo</a>
        </p>
      </div>
    </footer>

    <!--modal content-->

    <!-- <div class="container"> -->
      <div class="bg-modal">
        <div class="modal-content">
          <div class="close">+</div>
          <img id="match-img" src="" alt="Your drummer match" />
          <h3>Your best matched drummer</h3>
          <h4 id="match-name"></h4>
        </div>
      </div>
    <!-- </div> -->

    <!--jQuery Javascript-->
    <script>
      // automatically scrolls to the top
      window.scrollTo(0, 0);

      $(".close").on("click", function () {
        $(".bg-modal").css("display", "none");

        $("html, body").css({
          overflow: "auto",
          height: "auto",
        });
      });

      //click function for the submit button
      $("#submit-btn").on("click", function () {

        event.preventDefault();

        console.log("submit press");

        // display modal
        $(".bg-modal").css("display", "flex");

        // lock scrolling
        $("html, body").css({
          overflow: "hidden",
          height: "100%",
          width: "100%",
        });

        // assign the survey data as key pairs and storing it into an array
        var userData = {
          name: $("#user-name").val(),
          photo: $("#user-photo").val(),
          scores: [
            $("#question1").val(),
            $("#question2").val(),
            $("#question3").val(),
            $("#question4").val(),
            $("#question5").val(),
            $("#question6").val(),
            $("#question7").val(),
            $("#question8").val(),
            $("#question9").val(),
            $("#question10").val(),
          ],
        };

        console.log(userData);

        // ajax post to api firends. passing data and getting it written to the correct place
        $.post("/api/friends", userData, function (data) {

          console.log(data);

          $("#match-name").text(data.name);
          $("#match-img").attr("src", data.photo);
        });
      });
    </script>
  </body>
</html>
